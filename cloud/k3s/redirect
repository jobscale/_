redirect() {
  TEMP_PATH=$(mktemp -d)
  echo 'server {
  listen 80 default_server;
  server_name _ default;
  return 307 https://$host$request_uri;
}' > $TEMP_PATH/nginx-redirect.conf
  docker run --name redirect --restart always -p 80:80 -d nginx
  docker cp $TEMP_PATH/nginx-redirect.conf redirect:etc/nginx/conf.d/default.conf
  docker exec -it redirect nginx -s reload
  rm -fr $TEMP_PATH
}

redirect
