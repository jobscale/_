#!/usr/bin/env bash
set -eu

N100-cpu-info() {
  LANG=ja_JP.UTF-8 sensors | awk '/Package/ {print $4}'
  LANG=C mpstat 1 1 | awk '/Average/ {printf "%d\n", 100 - $NF}'
}

mac-cpu-info() {
  sudo powermetrics -n 1 --samplers smc 2>/dev/null | grep 'CPU die temperature:' | awk '{printf "%.1fâ„ƒ\n", $4}'
  iostat -w 1 -c 2 | tail -1 | awk '{printf "%d\n", 100 - $6}'
}

$(uname -n)-cpu-info
